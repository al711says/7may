<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–° –î–Ω—ë–º –ó–∞—â–∏—Ç–Ω–∏–∫–∞ –û—Ç–µ—á–µ—Å—Ç–≤–∞! </title>
  <style>
    body {
      font-family: sans-serif;
      background-image: url('military_bg.jpg');
      background-size: cover;
      color: #fff;
      text-align: center;
      padding: 30px;
    }
    #game, #quiz, #memory, #congrats, #instructions { display: none; }
    .btn { margin: 10px; padding: 10px 20px; font-size: 16px; cursor: pointer; }
    .card { width: 60px; height: 60px; display: inline-block; margin: 10px; background: #444; color: #444; font-size: 30px; line-height: 60px; }
    .card.open { background: #fff; color: #000; }
    .blinking { animation: blink 1s infinite; }
    @keyframes blink { 50% { opacity: 0.5; } }
  </style>
</head>
<body>
  <div id="menu">
    <h1>–í–≤–µ–¥–∏—Ç–µ –∏–º—è</h1>
    <input type="text" id="username" />
    <br /><br />
    <button class="btn" onclick="startGame()">–ù–∞—á–∞—Ç—å</button>
  </div>

  <div id="instructions">
    <h2 id="instruction-text"></h2>
    <button class="btn" onclick="launchGame()">–ò–≥—Ä–∞—Ç—å</button>
  </div>

  <div id="quiz">
    <h2 id="quiz-question"></h2>
    <input type="text" id="quiz-answer" />
    <br /><br />
    <button class="btn" onclick="checkQuizAnswer()">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
  </div>

  <div id="memory"></div>

  <div id="congrats">
    <h2 id="congrats-message" class="blinking"></h2>
    <button class="btn" onclick="goToMenu()">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
  </div>

  <script>
    const capitalQuestions = [
      ["–°—Ç–æ–ª–∏—Ü–∞ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞?", "–∞—Å—Ç–∞–Ω–∞"],
      ["–°—Ç–æ–ª–∏—Ü–∞ –§—Ä–∞–Ω—Ü–∏–∏?", "–ø–∞—Ä–∏–∂"],
      ["–°—Ç–æ–ª–∏—Ü–∞ –Ø–ø–æ–Ω–∏–∏?", "—Ç–æ–∫–∏–æ"]
    ];
    let username = "";
    let currentQuestion = 0;
    let score = 0;
    let gameType = "";

    function startGame() {
      username = document.getElementById("username").value.trim();
      if (["–ï—Ä–Ω–∞—Ä", "–î–∏–∞—Å"].includes(username)) {
        gameType = "quiz";
        showInstructions(`${username}, –æ—Ç–≤–µ—Ç—å –Ω–∞ 3 –≤–æ–ø—Ä–æ—Å–∞ –æ —Å—Ç–æ–ª–∏—Ü–∞—Ö. –¢–æ–ª—å–∫–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –ø—Ä–∏–≤–µ–¥—É—Ç –∫ —Å—é—Ä–ø—Ä–∏–∑—É!`);
      } else if (["–ê–π–¥–æ—Å", "–ï—Ä–∞—Å—ã–ª"].includes(username)) {
        gameType = "memory";
        showInstructions(`${username}, –Ω–∞–π–¥–∏ –≤—Å–µ –ø–∞—Ä—ã –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫! –£–¥–∞—á–∏!`);
      } else {
        alert("–ò–º—è –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.");
      }
    }

    function showInstructions(text) {
      document.getElementById("menu").style.display = "none";
      document.getElementById("instruction-text").innerText = text;
      document.getElementById("instructions").style.display = "block";
    }

    function launchGame() {
      document.getElementById("instructions").style.display = "none";
      if (gameType === "quiz") startQuiz();
      else if (gameType === "memory") startMemory();
    }

    function startQuiz() {
      currentQuestion = 0;
      score = 0;
      document.getElementById("quiz").style.display = "block";
      showQuestion();
    }

    function showQuestion() {
      if (currentQuestion < capitalQuestions.length) {
        document.getElementById("quiz-question").innerText = capitalQuestions[currentQuestion][0];
        document.getElementById("quiz-answer").value = "";
      } else {
        if (score === 3) showCongrats();
        else {
          alert("–ù—É–∂–Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ!");
          goToMenu();
        }
      }
    }

    function checkQuizAnswer() {
      const answer = document.getElementById("quiz-answer").value.trim().toLowerCase();
      if (answer === capitalQuestions[currentQuestion][1]) score++;
      currentQuestion++;
      showQuestion();
    }

    function startMemory() {
      const icons = ["ü™ñ", "üöÅ", "ü™ñ", "üöÅ"];
      icons.sort(() => Math.random() - 0.5);
      const memoryDiv = document.getElementById("memory");
      memoryDiv.innerHTML = "";
      memoryDiv.style.display = "block";
      let selected = [];
      icons.forEach((val, i) => {
        const card = document.createElement("div");
        card.className = "card";
        card.onclick = () => {
          if (card.classList.contains("open") || selected.length === 2) return;
          card.classList.add("open");
          card.innerText = val;
          selected.push({ el: card, val });
          if (selected.length === 2) {
            setTimeout(() => {
              if (selected[0].val !== selected[1].val) {
                selected.forEach(obj => {
                  obj.el.classList.remove("open");
                  obj.el.innerText = "";
                });
              }
              selected = [];
              if ([...memoryDiv.querySelectorAll(".card")].every(c => c.classList.contains("open"))) {
                showCongrats();
              }
            }, 800);
          }
        };
        memoryDiv.appendChild(card);
      });
    }

    function showCongrats() {
      document.getElementById("quiz").style.display = "none";
      document.getElementById("memory").style.display = "none";
      document.getElementById("congrats-message").innerText = {
        "–ï—Ä–Ω–∞—Ä": "–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º, –ï—Ä–Ω–∞—Ä! –¢—ã –Ω–∞—Å—Ç–æ—è—â–∏–π –∑–Ω–∞—Ç–æ–∫ —Å—Ç–æ–ª–∏—Ü!",
        "–î–∏–∞—Å": "–û—Ç–ª–∏—á–Ω–æ, –î–∏–∞—Å! –¢—ã –ø—Ä–æ—à—ë–ª –≤–∏–∫—Ç–æ—Ä–∏–Ω—É!",
        "–ê–π–¥–æ—Å": "–û—Ç–ª–∏—á–Ω–∞—è –ø–∞–º—è—Ç—å!",
        "–ï—Ä–∞—Å—ã–ª": "–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º, –ï—Ä–∞—Å—ã–ª! –ü–æ—Ç—Ä—è—Å–∞—é—â–∞—è –ø–∞–º—è—Ç—å!"
      }[username] || "–ú–æ–ª–æ–¥–µ—Ü!";
      document.getElementById("congrats").style.display = "block";
    }

    function goToMenu() {
      document.getElementById("congrats").style.display = "none";
      document.getElementById("menu").style.display = "block";
    }
  </script>
</body>
</html>
